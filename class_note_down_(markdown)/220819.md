## 0819 KDT Class_note_down

### ğŸ¯ í•™ìŠµ ëª©í‘œ : ë°ì´í„°ë² ì´ìŠ¤ ê¸°ì´ˆ

#### 1. CASE

- CASEë¬¸ì€ íŠ¹ì • ìƒí™©ì—ì„œ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ì—¬ í™œìš© ê°€ëŠ¥

- ELSEë¥¼ ìƒëµí•˜ëŠ” ê²½ìš° NULL ê°’ì´ ì§€ì •ë¨

  ```sqlite
  CASE 
  	WHEN ì¡°ê±´ì‹ THEN ì‹
  	WHEN ì¡°ê±´ì‹ THEN ì‹
  	ELSE ì‹
  END
  
  -- ì˜ˆì‹œ
  
  -- ë‹¨ìˆœì¡°íšŒ
  SELECT id, gender FROM healthcare LIMIT 5;
  
  -- ì„±ë³„ 1(ë‚¨ì), 2(ì—¬ì)
  SELECT id, CASE WHEN gender = 1 THEN 'ë‚¨ì' WHEN gender = 2 THEN 'ì—¬ì' END AS ì„±ë³„ FROM healthcare LIMIT 5; 
  
  -- í¡ì—°(smoking)
  SELECT DISTINCT smoking FROM healthcare;
  
  SELECT id, smoking, CASE WHEN smoking = 1 THEN 'ë¹„í¡ì—°ì' WHEN smoking = 2 THEN 'í¡ì—°ì' WHEN smoking = 3 THEN 'ì²´ì¸ìŠ¤ëª¨ì»¤' ELSE 'ë¬´ì‘ë‹µ' END FROM healthcare LIMIT 50;
  
  -- ì²­ì†Œë…„(~18), ì²­ë…„(~40), ì¤‘ì¥ë…„(~90)
  SELECT first_name, last_name, CASE WHEN age <= 18 THEN 'ì²­ì†Œë…„' WHEN age <= 40 THEN 'ì²­ë…„' WHEN age <= 90 THEN 'ì¤‘ì¥ë…„' ELSE 'ë…¸ë…„' END FROM users LIMIT 10;
  ```



#### 2. ì„œë¸Œì¿¼ë¦¬ --- ì„œë¸Œì¿¼ë¦¬, ë©”ì¸ì¿¼ë¦¬ ë¶€ë¶„ ê°•ì˜ ë‹¤ì‹œ í™•ì¸

- ì„œë¸Œì»¤ë¦¬ëŠ” íŠ¹ì •í•œ ê°’ì„ ë©”ì¸ ì¿¼ë¦¬ì— ë°˜í™˜í•˜ì—¬ í™œìš©

- ì‹¤ì œ í…Œì´ë¸”ì— ì—†ëŠ” ê¸°ì¤€ì„ ì´ìš©í•œ ê²€ìƒ‰ ê°€ëŠ¥

- ì„œë¸Œ ì¿¼ë¦¬ëŠ” ì†Œê´„í˜¸ë¡œ ê°ì‹¸ì„œ ì‚¬ìš©, ë©”ì¸ ì¿¼ë¦¬ì˜ ì¹¼ëŸ¼ì„ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥

- ë©”ì¸ ì¿¼ë¦¬ëŠ” ì„œë¸Œ ì¿¼ë¦¬ì˜ ì¹¼ëŸ¼ì„ ì´ìš©í•  ìˆ˜ ì—†ìŒ

  ```sqlite
  SELECT * FROM í…Œì´ë¸” WHERE ì»¬ëŸ¼1 = (SELECT ì»¬ëŸ¼1 FROM í…Œì´ë¸”);
  ```

- ë‹¨ì¼í–‰ ì„œë¸Œì¿¼ë¦¬

  - ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ 0 ë˜ëŠ” 1ê°œì¸ ê²½ìš°
  - ë‹¨ì¼í–‰ ë¹„êµ ì—°ì‚°ìì™€ í•¨ê»˜ ì‚¬ìš©(`=`, `<`, `<=`, `>=`, `>`, `<>`)
  - 

  ```sqlite
  -- ìœ ì€ì •ê³¼ ê°™ì€ ì§€ì—­ì— ì‚¬ëŠ” ì‚¬ëŒì˜ ìˆ˜
  SELECT country FROM users WHERE last_name = 'ìœ ' AND first_name = 'ì€ì •';
  
  SELECT COUNT(*) FROM users WHERE country = (SELECT country FROM usrs WHERE last_name = 'ìœ ' AND first_name = 'ì€ì •');
  ```

  - ë‹¨ì¼í–‰ ì„œë¸Œì¿¼ë¦¬ - SELECTì—ì„œ í™œìš©

  ```sqlite
  -- ì „ì²´ ì¸ì›ê³¼ í‰ê·  ì—°ë´‰, í‰ê·  ë‚˜ì´ ì¶œë ¥
  SELECT COUNT(*), AVG(balance), AVG(age) FROM users;
  
  SELECT (SELECT COUNT(*) FROM users) AS ì´ì¸ì›, (SELECT AVG(balance) FROM users) AS í‰ê· ì—°ë´‰;
  ```

  ```sqlite
  -- íŠ¹ì • ì„±ì”¨ë³„ë¡œ ê°€ì¥ ì ì€ ë‚˜ì´ì¸ ì‚¬ëŒ ëª¨ë‘
  SELECT last_name, MIN(age) FROM users GROUP BY last_name;
  
  SELECT last_name, first_name, age FROM users WHERE (last_name, age) IN (SELECT last_name, MIN(age) FROM users GROUP BY last_name) ORDER BY last_name;
  ```

  
